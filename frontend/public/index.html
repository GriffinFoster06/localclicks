<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Overlay Viewer</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'self';
                 frame-src https://player.twitch.tv;
                 connect-src 'self' https://api.overlay.phummylw.com ws: wss:;
                 img-src 'self' data:;
                 style-src 'self' 'unsafe-inline';
                 script-src 'self';
                 base-uri 'none';
                 form-action 'self';">
    <meta name="referrer" content="no-referrer">
    <link rel="stylesheet" href="/overlay.css">
    <script src="/config.js"></script>
</head>
<body>
    <div class="wrapper">
        <div class="player-frame">
            <iframe id="player" allowfullscreen></iframe>
            <div class="overlay"><canvas id="overlay"></canvas></div>
        </div>
    </div>
    <div class="hint" id="hint">Overlay: INACTIVE</div>
    <script>const segs = location.pathname.split('/').filter(Boolean);
    const streamer = segs[0] || 'dougdoug';
    const parent = location.hostname;
    const src = `https://player.twitch.tv/?channel=${encodeURIComponent(streamer)}&parent=${encodeURIComponent(parent)}&muted=true`;
    document.getElementById('player').src = src;</script>
    <script src="/overlay.js"></script>
</body>
</html>
